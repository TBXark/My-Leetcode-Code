# 37. Sudoku Solver

### 2020-07-29

Write a program to solve a Sudoku puzzle by filling the empty cells.

A sudoku solution must satisfy **all of the following rules**:

1. Each of the digits `1-9` must occur exactly once in each row.
2. Each of the digits `1-9` must occur exactly once in each column.
3. Each of the the digits `1-9` must occur exactly once in each of the 9 `3x3` sub-boxes of the grid.

Empty cells are indicated by the character `'.'`.

![img](https://upload.wikimedia.org/wikipedia/commons/thumb/f/ff/Sudoku-by-L2G-20050714.svg/250px-Sudoku-by-L2G-20050714.svg.png)
A sudoku puzzle...

![img](https://upload.wikimedia.org/wikipedia/commons/thumb/3/31/Sudoku-by-L2G-20050714_solution.svg/250px-Sudoku-by-L2G-20050714_solution.svg.png)
...and its solution numbers marked in red.

**Note:**

- The given board contain only digits `1-9` and the character `'.'`.
- You may assume that the given Sudoku puzzle will have a single unique solution.
- The given board size is always `9x9`.


# Solution

```swift

class Solution {
    static let num: [Character] = ["1", "2", "3", "4", "5", "6", "7", "8", "9"]
    func solveSudoku(_ board: inout [[Character]]) {
        var clo = [Set<Character>].init(repeating: Set<Character>(), count: 9)
        var row = [Set<Character>].init(repeating: Set<Character>(), count: 9)
        var block = [Set<Character>].init(repeating: Set<Character>(), count: 9)
        for y in 0..<9 {
            for x in 0..<9 {
                let c = board[y][x]
                clo[y].insert(c)
                row[x].insert(c)
                block[x/3 + (y/3) * 3].insert(c)
            }
        }
        _ = fillGrid(index: 0, board: &board, clo: &clo, row: &row, block: &block)
    }


    func fillGrid(index: Int,
                  board: inout [[Character]],
                  clo: inout [Set<Character>],
                  row: inout [Set<Character>],
                  block: inout [Set<Character>]) -> Bool {
        guard index < 81 else {
            return true
        }
        let x = index % 9
        let y = index / 9
        if board[y][x] == "." {
            for c in Solution.num {
                if !clo[y].contains(c), !row[x].contains(c), !block[x/3 + (y/3) * 3].contains(c) {
                    board[y][x] = c
                    clo[y].insert(c)
                    row[x].insert(c)
                    block[x/3 + (y/3) * 3].insert(c)
                    if fillGrid(index: index + 1, board: &board, clo: &clo, row: &row, block: &block) {
                        return true
                    } else {
                        clo[y].remove(c)
                        row[x].remove(c)
                        block[x/3 + (y/3) * 3].remove(c)
                        board[y][x] = "."
                    }
                }
            }
            return false
        } else {
            return fillGrid(index: index + 1, board: &board, clo: &clo, row: &row, block: &block)
        }
    }
}

```
